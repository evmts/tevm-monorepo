# Bundler Plugins

Tevm provides plugins for all major JavaScript bundlers to enable direct Solidity imports in your code. These plugins handle the compilation of Solidity files and generate the necessary TypeScript bindings.

## How Bundler Plugins Work

When you import a Solidity file in your TypeScript or JavaScript code:

```ts
import { MyContract } from './MyContract.sol'
```

The Tevm bundler plugin intercepts this import and performs several important steps:

1. **Compilation**: The plugin compiles the Solidity contract using solc
2. **Resolution**: It resolves all imports in the Solidity file
3. **Code Generation**: It generates JavaScript code that creates a [Tevm Contract](https://tevm.sh/reference/contract) instance
4. **Type Generation**: It generates TypeScript type definitions for the contract

The result is a fully typed Tevm Contract instance that provides type-safe access to your contract's methods and events. The contract structure looks like this:

```ts
// MyContract is a Tevm Contract instance with the following structure:
{
  abi: [...],                 // The contract ABI
  bytecode: '0x...',          // The contract creation bytecode
  deployedBytecode: '0x...',  // The runtime bytecode
  read: {                     // Read methods (view/pure functions)
    balanceOf: (address) => {...}, 
  },
  write: {                    // Write methods (state-changing functions)
    transfer: (to, amount) => {...},
  },
  events: {                   // Contract events
    Transfer: (...) => {...},
  },
  withAddress: (address) => {...},  // Returns a new contract instance with the given address
}
```

All the bundler plugins use the same underlying mechanism to provide a consistent developer experience regardless of your build tool choice.

### Library Compatibility

The Tevm contracts generated by these plugins are compatible with all popular Ethereum libraries, including:

- **Wagmi**: Use with hooks like `useContractRead` and `useContractWrite`
- **Viem**: Use with client methods like `readContract` and `writeContract`
- **Ethers.js**: Convert to Ethers contracts with the ABI and address
- **Any other library**: The contracts provide standard Ethereum ABI structures

For example, with Wagmi:

```tsx
import { useContractRead } from 'wagmi'
import { ERC20Token } from './ERC20Token.sol'

function Balance() {
  const { data } = useContractRead({
    ...ERC20Token.read.balanceOf('0x123...'),
    address: '0xContractAddress',
  })
  
  return <div>Balance: {data?.toString()}</div>
}
```

This makes Tevm a powerful tool for integrating with your existing frontend architecture while providing better DX through direct Solidity imports.

## Available Plugins

Tevm provides plugins for all major JavaScript bundlers, each sharing the same core functionality with adaptations for the specific build system. All plugin packages contain comprehensive [API documentation](https://github.com/evmts/tevm-monorepo/) in their respective GitHub directories.

### Vite Plugin

The [Vite](https://vitejs.dev/) plugin enables Solidity imports in Vite applications, including React, Vue, Svelte, and other frameworks.

```bash
npm install @tevm/vite
```

**Configuration:**

```ts
// vite.config.ts
import { defineConfig } from 'vite'
import { vitePluginTevm } from '@tevm/vite'

export default defineConfig({
  plugins: [
    vitePluginTevm(),
  ],
})
```

**Key Features:**
- Hot Module Reloading for Solidity files
- Full TypeScript integration when used with `@tevm/ts-plugin`
- Compatible with other Vite plugins like React, Vue, etc.

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/vite/docs)

### Webpack Plugin

The Webpack plugin enables Solidity imports in Webpack applications, compatible with all Webpack versions supporting custom loaders.

```bash
npm install @tevm/webpack
```

**Configuration:**

```js
// webpack.config.js
// package.json: { "type": "module" }
import { WebpackPluginTevm } from '@tevm/webpack'

export default {
  // other webpack configuration
  plugins: [
    new WebpackPluginTevm()
  ],
}
```

**Key Features:**
- Compatible with all major Webpack versions
- Works with Create React App, Next.js, and other Webpack-based tools
- Optimized for both development and production builds

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/webpack/docs)

### Bun Plugin

The [Bun](https://bun.sh) plugin enables Solidity imports in Bun applications, leveraging Bun's speed for ultra-fast compilation.

```bash
npm install @tevm/bun
```

**Configuration:**

```ts
// plugins.ts
import { plugin } from 'bun'
import { bunPluginTevm } from '@tevm/bun'

plugin(bunPluginTevm({}))
```

And in your `bunfig.toml`:

```toml
preload = ["./plugins.ts"]

[test]
preload = ["./plugins.ts"]
```

**Key Features:**
- Ultra-fast Solidity compilation leveraging Bun's performance
- Integrates with Bun's test runner for contract testing
- Support for watching file changes

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/bun/docs)

### ESBuild Plugin

The [ESBuild](https://esbuild.github.io/) plugin enables Solidity imports in ESBuild configurations, perfect for high-performance build pipelines.

```bash
npm install @tevm/esbuild
```

**Configuration:**

```js
// build.js
// package.json: { "type": "module" }
import { build } from 'esbuild'
import { esbuildPluginTevm } from '@tevm/esbuild'

build({
  // other esbuild configuration
  plugins: [
    esbuildPluginTevm(),
  ],
})
```

**Key Features:**
- Lightning-fast compilation with ESBuild's performance
- Low overhead for production builds
- Supports all ESBuild formats (ESM, CJS, IIFE)

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/esbuild/docs)

### Rollup Plugin

The [Rollup](https://rollupjs.org/) plugin enables Solidity imports in Rollup configurations, ideal for library authors and tree-shaking.

```bash
npm install @tevm/rollup
```

**Configuration:**

```js
// rollup.config.js
import { rollupPluginTevm } from '@tevm/rollup'

export default {
  // other rollup configuration
  plugins: [
    rollupPluginTevm(),
  ],
}
```

**Key Features:**
- Excellent tree-shaking for minimal bundles
- Works with other Rollup plugins
- Ideal for library development

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/rollup/docs)

### Rspack Plugin

The [Rspack](https://www.rspack.dev/) plugin enables Solidity imports in Rspack applications, combining Webpack compatibility with Rust-based performance.

```bash
npm install @tevm/rspack
```

**Configuration:**

```js
// rspack.config.js
// package.json: { "type": "module" }
import { rspackPluginTevm } from '@tevm/rspack'

export default {
  // other rspack configuration
  plugins: [
    rspackPluginTevm(),
  ],
}
```

**Key Features:**
- High-performance compilation with Rust-based Rspack
- API compatible with Webpack
- Optimized for large applications

**Reference:** [API Documentation](https://github.com/evmts/tevm-monorepo/tree/main/bundler-packages/rspack/docs)

### Vite Plugin

```bash
npm install @tevm/vite
```

The Vite plugin enables Solidity imports in Vite applications.

```ts
// vite.config.ts
import { defineConfig } from 'vite'
import { vitePluginTevm } from '@tevm/vite'

export default defineConfig({
  plugins: [
    vitePluginTevm(),
  ],
})
```

### Webpack Plugin

```bash
npm install @tevm/webpack
```

The Webpack plugin enables Solidity imports in Webpack applications.

```js
// webpack.config.js
const { tevmPlugin } = require('@tevm/webpack')

module.exports = {
  // other webpack configuration
  plugins: [
    tevmPlugin(),
  ],
}
```

### Bun Plugin

```bash
npm install @tevm/bun
```

The Bun plugin enables Solidity imports in Bun applications.

```ts
// plugins.ts
import { plugin } from 'bun'
import { tevmBunPlugin } from '@tevm/bun'

plugin(tevmBunPlugin({}))
```

And in your `bunfig.toml`:

```toml
preload = ["./plugins.ts"]

[test]
preload = ["./plugins.ts"]
```

### ESBuild Plugin

```bash
npm install @tevm/esbuild
```

The ESBuild plugin enables Solidity imports in ESBuild applications.

```js
// build.js
const { build } = require('esbuild')
const { esbuildPluginTevm } = require('@tevm/esbuild')

build({
  // other esbuild configuration
  plugins: [
    esbuildPluginTevm(),
  ],
})
```

### Rollup Plugin

```bash
npm install @tevm/rollup
```

The Rollup plugin enables Solidity imports in Rollup applications.

```js
// rollup.config.js
import { rollupPluginTevm } from '@tevm/rollup'

export default {
  // other rollup configuration
  plugins: [
    rollupPluginTevm(),
  ],
}
```

### Rspack Plugin

```bash
npm install @tevm/rspack
```

The Rspack plugin enables Solidity imports in Rspack applications.

```js
// rspack.config.js
const { tevmRspackPlugin } = require('@tevm/rspack')

module.exports = {
  // other rspack configuration
  plugins: [
    tevmRspackPlugin(),
  ],
}
```

## Plugin Configuration

All Tevm bundler plugins share common configuration options. Here's an example with default values:

```js
pluginName({
  // The root directory of your project
  // Defaults to process.cwd()
  rootDir: process.cwd(),
  
  // Whether to enable debugging output
  // Defaults to false
  debug: false,
  
  // Custom solc version to use
  // Defaults to the one specified in your project
  solc: '0.8.19',
  
  // Other configuration options...
})
```

For more detailed configuration options and advanced usage, see the documentation for each specific plugin.

## Under the Hood

All bundler plugins are built on top of the `@tevm/base-bundler` package, which provides the core functionality for resolving and compiling Solidity files. The plugins adapt this functionality to the specific bundler's plugin system.

For details on the internal workings, see the [Other Packages](/bundler-packages/other-packages) page.