import { getAlchemyUrl } from '@tevm/test-utils'
import { createMemoryClient, http } from 'tevm'

const rpcUrl = getAlchemyUrl('optimism-sepolia')

export const slowCallRepo = async () => {
	// tevm memory client in fork mode
	const forkClient = createMemoryClient({
		fork: { transport: http(rpcUrl)({}) },
	})

	await forkClient.tevmReady()

	return forkClient.tevmCall({
		from: '0xef987cde72bc6a9e351d2460214d75f095b1b862',
		data: '0x608060405234801561001057600080fd5b5060405161012938038061012983398101604081905261002f91610037565b600055610050565b60006020828403121561004957600080fd5b5051919050565b60cb8061005e6000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c806301339c211460375780638c59507c14603f575b600080fd5b603d6059565b005b604760005481565b60405190815260200160405180910390f35b7f7c84ba1c5769a0155145414f13e03f1d0d6a3a7e5d4f6d45262df4d9d48c32cd600054604051608b91815260200190565b60405180910390a156fea26469706673582212201509e5f7aed59985fb32c8f48b792565644fc6decb12b235b12226ae2855c4f464736f6c634300080d0033000000000000000000000000000000000000000000000000000000000000000a',
		skipBalance: true,
	})
}
