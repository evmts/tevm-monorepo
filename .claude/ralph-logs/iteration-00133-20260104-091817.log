# Ralph Migration Iteration 133 - Migrate Address type from abitype to native

## Summary

Migrated the `Address` type from abitype to a native implementation in @tevm/utils. This is a simple type alias (`\`0x${string}\``) that doesn't require any complex abitype/viem functionality.

## Changes Made

### New Files

1. `packages/utils/src/address-types.ts` - Native Address type definition:
   - `Address = \`0x${string}\`` - Simple template literal type matching abitype's definition
   - Includes JSDoc documentation with examples
   - Note: This is an unbranded type for maximum compatibility with existing code

### Modified Files

1. `packages/utils/src/abitype.ts` - Updated to use native Address type:
   - Added `export type { Address } from './address-types.js'`
   - Removed `Address` from the abitype imports block
   - Added comment documenting the migration

## Design Decision

I chose to create a simple unbranded `Address = \`0x${string}\`` type rather than using voltaire's branded `AddressType = Uint8Array & { readonly [brand]: "Address" }` because:

1. **Backward compatibility**: Abitype's Address is a hex string (`\`0x${string}\``), so existing code expects string addresses
2. **Type compatibility**: Viem uses the same string-based Address type
3. **No casting required**: Using the branded voltaire type would require casting everywhere
4. **Progressive migration**: The simple type can be used now; if we need branded types later, it can be added

## Impact

### Types Migrated
- `Address` - Simple template literal type for Ethereum addresses

### Remaining abitype imports in abitype.ts
- `Abi` - Complex ABI type definition
- `AbiConstructor` - Constructor ABI item
- `AbiEvent` - Event ABI item
- `AbiFunction` - Function ABI item
- `AbiItemType` - Type discriminator
- `AbiParametersToPrimitiveTypes` - Complex generic type
- `ExtractAbiEvent` - Complex generic utility type
- `ExtractAbiEventNames` - Complex generic utility type
- `ExtractAbiEvents` - Complex generic utility type
- `ExtractAbiFunction` - Complex generic utility type
- `ExtractAbiFunctionNames` - Complex generic utility type
- `FormatAbi` - Complex generic utility type
- `ParseAbi` - Complex generic utility type

### Remaining viem type imports in abitype.ts
- `Account` - Complex type with signing methods
- `ContractConstructorArgs` - Complex generic type
- `ContractFunctionName` - Complex generic type
- `CreateEventFilterParameters` - Complex parameterized type
- `DecodeFunctionResultReturnType` - Complex generic type
- `EncodeDeployDataParameters` - Complex parameterized type
- `EncodeFunctionDataParameters` - Complex parameterized type
- `Filter` - Complex filter type
- `GetEventArgs` - Complex generic type
- `HDAccount` - Complex type with signing methods

## Test Results

- All 540 tests pass in @tevm/utils
- All 29 tests pass in @tevm/contract
- TypeScript compilation shows only pre-existing voltaire errors (unrelated to this change)

## Next Steps

1. Continue reducing abitype imports (most are complex generic types that are better kept)
2. Target viem types that can be simplified (e.g., Account types if we only need addresses)
3. Focus on runtime viem function imports in viem.js that can be replaced with native implementations
