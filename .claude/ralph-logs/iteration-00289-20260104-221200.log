# Ralph Migration Log - Iteration 289
## Date: 2026-01-04 22:12

## Summary
Created native `nativeHttp()` transport function using @tevm/voltaire's HttpProvider. This provides a viem-compatible http() transport API without requiring viem as a dependency.

## Changes Made

### New Files:
1. `packages/utils/src/nativeHttp.js`
   - Native HTTP transport using voltaire's HttpProvider
   - Compatible with viem's http() transport API
   - Supports configuration options: timeout, retryCount, retryDelay, headers
   - Returns a factory function that creates EIP-1193 compliant request function

2. `packages/utils/src/nativeHttp.spec.ts`
   - 6 tests covering transport creation, configuration, and request forwarding
   - Uses mocked HttpProvider for unit testing

### Modified Files:
1. `packages/utils/src/index.ts`
   - Added export for `nativeHttp` function

2. `packages/utils/src/viem.js`
   - Added deprecation notice to viem transport exports (http, webSocket, createPublicClient, etc.)
   - Recommends using nativeHttp() and createForkRpcClient() instead

## Test Results
- nativeHttp.spec.ts: 6 tests passed
- createForkRpcClient.spec.ts: 9 tests passed
- getForkClient.spec.ts: 3 tests passed
- build:types: successful

## Migration Path
Users can now migrate from viem's http() to nativeHttp():

```javascript
// Before:
import { http } from 'viem'
const transport = http('https://mainnet.optimism.io')

// After:
import { nativeHttp } from '@tevm/utils'
const transport = nativeHttp('https://mainnet.optimism.io')

// With configuration:
const transport = nativeHttp('https://mainnet.optimism.io', {
  timeout: 60000,
  retryCount: 5,
  headers: { 'Authorization': 'Bearer token' }
})
```

## Impact
This change provides a drop-in replacement for viem's http() transport that uses voltaire's
HttpProvider internally. This continues the migration strategy of providing native alternatives
before deprecating and removing viem dependencies.

## Next Steps
1. Consider creating nativeWebSocket() using voltaire's WebSocketProvider
2. Consider creating nativeCustom() for custom transport functions
3. Update example code in memory-client JSDoc to use nativeHttp() in examples
4. Continue migrating other viem dependencies in core packages
